/*dragon 14/05/23 18:02:28*/
var dCaptcha={t3:"dcaptcha",width:150,height:50,length:4,token:"",s5:function(e){return"/apps/open/captcha?t="+this.token+"&l="+this.length+"&w="+this.width+"&h="+this.height+e},f8:function(e,t){dj("#hd"+this.t3).val(e),dj("#img"+this.t3).attr("src",t)},refresh:function(){let e=this;dj.getJSONP(e.s5(""),(function(t){0===t.err&&e.f8(t.token,t.imgurl)}))},init:function(e,t,i,a,n){if(this.t3=e,t&&t>0&&(this.width=t),i&&i>0&&(this.height=i),void 0!==a&&(this.length=a),void 0!==n&&(this.token=n),!document.getElementById("img"+e)){dj("#"+this.t3).before('<img id="img'+this.t3+'" class="captcha" /><input id="hd'+this.t3+'" type="hidden" name="'+this.t3+'captchatoken" />');let e=this;dj("#img"+this.t3).click((function(){e.refresh()}))}return""!==this.token?this.f8(this.token,this.s5("&i=1")):this.refresh(),this}};!function(e){e.dCrop=function(t,i){var a,n=e.extend({},e.dCrop.defaults),o=navigator.userAgent.toLowerCase(),s=/msie/.test(o),d=/msie [1-6]\./.test(o);function r(e){return Math.round(e)+"px"}function l(e){return n.baseClass+"-"+e}function c(t){var i=e(t).offset();return[i.left,i.top]}function u(e){return[e.pageX-a[0],e.pageY-a[1]]}function h(t){"object"!=typeof t&&(t={}),n=e.extend(n,t),e.each(["onChange","onSelect","onRelease","onDblClick"],(function(e,t){"function"!=typeof n[t]&&(n[t]=function(){})}))}function p(e,t,i){if(a=c(z),G.setCursor("move"===e?e:e+"-resize"),"move"===e)return G.activateHandlers(function(e){var t=e;return Q.watchKeys(),function(e){Z.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,$.update()}}(t),w,i);var o=Z.getFixed(),s=f(e),d=Z.getCorner(f(s));Z.setPressed(Z.getCorner(s)),Z.setCurrent(d),G.activateHandlers(function(e,t){return function(i){if(n.aspectRatio)switch(e){case"e":case"w":i[1]=t.y+1;break;case"n":case"s":i[0]=t.x+1}else switch(e){case"e":case"w":i[1]=t.y2;break;case"n":case"s":i[0]=t.x2}Z.setCurrent(i),$.update()}}(e,o),w,i)}function f(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function m(e){return function(t){return!n.disabled&&(!("move"===e&&!n.allowMove)&&(a=c(z),F=!0,p(e,u(t)),t.stopPropagation(),t.preventDefault(),!1))}}function g(e,t,i){var a=e.width(),n=e.height();a>t&&t>0&&(a=t,n=t/e.width()*e.height()),n>i&&i>0&&(n=i,a=i/e.height()*e.width()),q=e.width()/a,E=e.height()/n,e.width(a).height(n)}function v(e){return{x:e.x*q,y:e.y*E,x2:e.x2*q,y2:e.y2*E,w:e.w*q,h:e.h*E}}function w(e){var t=Z.getFixed();t.w>n.minSelect[0]&&t.h>n.minSelect[1]?($.enableHandles(),$.done()):$.release(),G.setCursor(n.allowSelect?"crosshair":"default")}function b(e){if(n.disabled)return!1;if(!n.allowSelect)return!1;F=!0,a=c(z),$.disableHandles(),G.setCursor("crosshair");var t=u(e);return Z.setPressed(t),$.update(),G.activateHandlers(y,w,"touch"===e.type.substring(0,5)),Q.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function y(e){Z.setCurrent(e),$.update()}function C(){var t=e("<div></div>").addClass(l("tracker"));return s&&t.css({opacity:0,backgroundColor:"white"}),t}"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof i&&(i={}),h(i);var j={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},x=e(t),k=!0;if("IMG"===t.tagName){if(0!==x[0].width&&0!==x[0].height)x.width(x[0].width),x.height(x[0].height);else{var S=new Image;S.src=x[0].src,x.width(S.width),x.height(S.height)}var z=x.clone().removeAttr("id").css(j).show();z.width(x.width()),z.height(x.height()),x.after(z).hide()}else z=x.css(j).show(),k=!1,null===n.shade&&(n.shade=!0);g(z,n.boxWidth,n.boxHeight);var M=z.width(),_=z.height(),A=e("<div />").width(M).height(_).addClass(l("holder")).css({position:"relative",backgroundColor:n.bgColor}).insertAfter(x).append(z);n.addClass&&A.addClass(n.addClass);var O=e("<div />"),T=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),P=e("<div />").width("100%").height("100%").css("zIndex",320),I=e("<div />").css({position:"absolute",zIndex:600}).dblclick((function(){var e=Z.getFixed();n.onDblClick.call(ne,e)})).insertBefore(z).append(T,P);k&&(O=e("<img />").attr("src",z.attr("src")).css(j).width(M).height(_),T.append(O)),d&&I.css({overflowY:"hidden"});var H,D,L,B,q,E,F,N,R=n.boundary,V=C().width(M+2*R).height(_+2*R).css({position:"absolute",top:r(-R),left:r(-R),zIndex:290}).mousedown(b),U=n.bgColor,W=n.bgOpacity;a=c(z);var K=function(){function e(){var e,t={},i=["touchstart","touchmove","touchend"],a=document.createElement("div");try{for(e=0;e<i.length;e++){var n=i[e],o=(n="on"+n)in a;o||(a.setAttribute(n,"return;"),o="function"==typeof a[n]),t[i[e]]=o}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return!n.disabled&&(!("move"===e&&!n.allowMove)&&(a=c(z),F=!0,p(e,u(K.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return b(K.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:!0===n.touchSupport||!1===n.touchSupport?n.touchSupport:e()}}(),Z=function(){var e,t,i=0,a=0,o=0,s=0;function d(){if(!n.aspectRatio)return function(){var e,t=o-i,n=s-a;H&&Math.abs(t)>H&&(o=t>0?i+H:i-H);D&&Math.abs(n)>D&&(s=n>0?a+D:a-D);B/E&&Math.abs(n)<B/E&&(s=n>0?a+B/E:a-B/E);L/q&&Math.abs(t)<L/q&&(o=t>0?i+L/q:i-L/q);i<0&&(o-=i,i=0);a<0&&(s-=a,a=0);o<0&&(i-=o,o=0);s<0&&(a-=s,s=0);o>M&&(i-=e=o-M,o-=e);s>_&&(a-=e=s-_,s-=e);i>M&&(s-=e=i-_,a-=e);a>_&&(s-=e=a-_,a-=e);return c(l(i,a,o,s))}();var e,t,d,r,u=n.aspectRatio,h=n.minSize[0]/q,p=n.maxSize[0]/q,f=n.maxSize[1]/E,m=o-i,g=s-a,v=Math.abs(m),w=Math.abs(g);return 0===p&&(p=10*M),0===f&&(f=10*_),v/w<u?(t=s,d=w*u,(e=m<0?i-d:d+i)<0?(e=0,r=Math.abs((e-i)/u),t=g<0?a-r:r+a):e>M&&(e=M,r=Math.abs((e-i)/u),t=g<0?a-r:r+a)):(e=o,r=v/u,(t=g<0?a-r:a+r)<0?(t=0,d=Math.abs((t-a)*u),e=m<0?i-d:d+i):t>_&&(t=_,d=Math.abs(t-a)*u,e=m<0?i-d:d+i)),e>i?(e-i<h?e=i+h:e-i>p&&(e=i+p),t=t>a?a+(e-i)/u:a-(e-i)/u):e<i&&(i-e<h?e=i-h:i-e>p&&(e=i-p),t=t>a?a+(i-e)/u:a-(i-e)/u),e<0?(i-=e,e=0):e>M&&(i-=e-M,e=M),t<0?(a-=t,t=0):t>_&&(a-=t-_,t=_),c(l(i,a,e,t))}function r(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>M&&(e[0]=M),e[1]>_&&(e[1]=_),[Math.round(e[0]),Math.round(e[1])]}function l(e,t,i,a){var n=e,o=i,s=t,d=a;return i<e&&(n=i,o=e),a<t&&(s=a,d=t),[n,s,o,d]}function c(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}return{flipCoords:l,setPressed:function(e){e=r(e),o=i=e[0],s=a=e[1]},setCurrent:function(i){i=r(i),e=i[0]-o,t=i[1]-s,o=i[0],s=i[1]},getOffset:function(){return[e,t]},moveOffset:function(e){var t=e[0],n=e[1];0>i+t&&(t-=t+i),0>a+n&&(n-=n+a),_<s+n&&(n+=_-(s+n)),M<o+t&&(t+=M-(o+t)),i+=t,o+=t,a+=n,s+=n},getCorner:function(e){var t=d();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}},getFixed:d}}(),J=function(){var t=!1,i=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),a={top:d(),left:d().height(_),right:d().height(_),bottom:d()};function o(){return s(Z.getFixed())}function s(e){a.top.css({left:r(e.x),width:r(e.w),height:r(e.y)}),a.bottom.css({top:r(e.y2),left:r(e.x),width:r(e.w),height:r(_-e.y2)}),a.right.css({left:r(e.x2),width:r(M-e.x2)}),a.left.css({width:r(e.x)})}function d(){return e("<div />").css({position:"absolute",backgroundColor:n.shadeColor||n.bgColor}).appendTo(i)}function l(){t||(t=!0,i.insertBefore(z),o(),$.setBgOpacity(1,0,1),O.hide(),c(n.shadeColor||n.bgColor,1),$.isAwake()?h(n.bgOpacity,1):h(1,1))}function c(e,t){ie(p(),e,t)}function u(){t&&(i.remove(),O.show(),t=!1,$.isAwake()?$.setBgOpacity(n.bgOpacity,1,1):($.setBgOpacity(1,1,1),$.disableHandles()),ie(A,0,1))}function h(e,a){t&&(n.bgFade&&!a?i.animate({opacity:1-e},{queue:!1,duration:n.fadeTime}):i.css({opacity:1-e}))}function p(){return i.children()}return{update:o,updateRaw:s,getShades:p,setBgColor:c,enable:l,disable:u,resize:function(e,t){a.left.css({height:r(t)}),a.right.css({height:r(t)})},refresh:function(){n.shade?l():u(),$.isAwake()&&h(n.bgOpacity)},opacity:h}}(),$=function(){var t,i=370,a={},o={},s={},d=!1;function c(t,i){var a=e("<div />").mousedown(m(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return K.support&&a.bind("touchstart.dcrop",K.createDragger(t)),P.append(a),a}function u(){var e=Z.getFixed();Z.setPressed([e.x,e.y]),Z.setCurrent([e.x2,e.y2]),h()}function h(e){if(t)return p(e)}function p(e){var i,a,o,s,d=Z.getFixed();i=d.w,a=d.h,I.width(Math.round(i)).height(Math.round(a)),o=d.x,s=d.y,n.shade||O.css({top:r(-s),left:r(-o)}),I.css({top:r(s),left:r(o)}),n.shade&&J.updateRaw(d),t||function(){I.show(),n.shade?J.opacity(W):f(W,!0);t=!0}(),e?n.onSelect.call(ne,v(d)):n.onChange.call(ne,v(d))}function f(e,i,a){(t||i)&&(n.bgFade&&!a?z.animate({opacity:e},{queue:!1,duration:n.fadeTime}):z.css("opacity",e))}function g(){if(d=!0,n.allowResize)return P.show(),!0}function w(){d=!1,P.hide()}function b(e){e?(N=!0,w()):(N=!1,g())}n.dragEdges&&e.isArray(n.createDragbars)&&function(e){var t;for(t=0;t<e.length;t++)s[e[t]]=c(e[t],i++).addClass("dcrop-dragbar")}(n.createDragbars),e.isArray(n.createHandles)&&function(e){var t,a,s,d;for(t=0;t<e.length;t++)o[e[t]]=(a=e[t],s=void 0,d=void 0,s=n.handleSize,d=c(a,i++).css({opacity:n.handleOpacity}).addClass(l("handle")),s&&d.width(s).height(s),d)}(n.createHandles),n.drawBorders&&e.isArray(n.createBorders)&&function(t){var i,o,s,d;for(o=0;o<t.length;o++){switch(t[o]){case"n":i="hline";break;case"s":i="hline bottom";break;case"e":i="vline right";break;case"w":i="vline"}a[t[o]]=(s=i,d=void 0,d=e("<div />").css({position:"absolute",opacity:n.borderOpacity}).addClass(l(s)),T.append(d),d)}}(n.createBorders),e(document).bind("touchstart.dcrop-ios",(function(t){e(t.currentTarget).hasClass("dcrop-tracker")&&t.stopPropagation()}));var y=C().mousedown(m("move")).css({cursor:"move",position:"absolute",zIndex:360});return K.support&&y.bind("touchstart.dcrop",K.createDragger("move")),T.append(y),w(),{updateVisible:h,update:p,release:function(){w(),I.hide(),n.shade?J.opacity(1):f(1),t=!1,n.onRelease.call(ne)},refresh:u,isAwake:function(){return t},setCursor:function(e){y.css("cursor",e)},enableHandles:g,enableOnly:function(){d=!0},showHandles:function(){d&&P.show()},disableHandles:w,animMode:b,setBgOpacity:f,done:function(){b(!1),u()}}}(),G=function(){var t=function(){},i=function(){},a=n.trackDocument;function o(e){return t(u(e)),!1}function s(a){return a.preventDefault(),a.stopPropagation(),F&&(F=!1,i(u(a)),$.isAwake()&&n.onSelect.call(ne,v(Z.getFixed())),V.css({zIndex:290}),e(document).unbind(".dcrop"),t=function(){},i=function(){}),!1}function d(e){return t(u(K.cfilter(e))),!1}function r(e){return s(K.cfilter(e))}return a||V.mousemove(o).mouseup(s).mouseout(s),z.before(V),{activateHandlers:function(n,l,c){return F=!0,t=n,i=l,function(t){V.css({zIndex:450}),t?e(document).bind("touchmove.dcrop",d).bind("touchend.dcrop",r):a&&e(document).bind("mousemove.dcrop",o).bind("mouseup.dcrop",s)}(c),!1},setCursor:function(e){V.css("cursor",e)}}}(),Q=function(){var t=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("dcrop-keymgr"),i=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);function a(e,t,i){n.allowMove&&(Z.moveOffset([t,i]),$.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}return n.keySupport&&(t.keydown((function(e){if(e.ctrlKey||e.metaKey)return!0;var t=!!e.shiftKey?10:1;switch(e.keyCode){case 37:a(e,-t,0);break;case 39:a(e,t,0);break;case 38:a(e,0,-t);break;case 40:a(e,0,t);break;case 27:n.allowSelect&&$.release();break;case 9:return!0}return!1})).blur((function(e){t.hide()})),d||!n.fixedSupport?(t.css({position:"absolute",left:"-20px"}),i.append(t).insertBefore(z)):t.insertBefore(z)),{watchKeys:function(){n.keySupport&&(t.show(),t.focus())}}}();function X(e){Y([e[0]/q,e[1]/E,e[2]/q,e[3]/E]),n.onSelect.call(ne,v(Z.getFixed())),$.enableHandles()}function Y(e){Z.setPressed([e[0],e[1]]),Z.setCurrent([e[2],e[3]]),$.update()}function ee(){n.disabled=!0,$.disableHandles(),$.setCursor("default"),G.setCursor("default")}function te(){n.disabled=!1,ae()}function ie(t,i,a){var o=i||n.bgColor;n.bgFade&&e.fx.step.hasOwnProperty("backgroundColor")&&n.fadeTime&&!a?t.animate({backgroundColor:o},{queue:!1,duration:n.fadeTime}):t.css("backgroundColor",o)}function ae(e){n.allowResize?e?$.enableOnly():$.enableHandles():$.disableHandles(),G.setCursor(n.allowSelect?"crosshair":"default"),$.setCursor(n.allowMove?"move":"default"),n.hasOwnProperty("trueSize")&&(q=n.trueSize[0]/M,E=n.trueSize[1]/_),n.hasOwnProperty("setSelect")&&(X(n.setSelect),$.done(),delete n.setSelect),J.refresh(),n.bgColor!==U&&(ie(n.shade?J.getShades():A,n.shade&&n.shadeColor||n.bgColor),U=n.bgColor),W!==n.bgOpacity&&(W=n.bgOpacity,n.shade?J.refresh():$.setBgOpacity(W)),H=n.maxSize[0]||0,D=n.maxSize[1]||0,L=n.minSize[0]||0,B=n.minSize[1]||0,n.hasOwnProperty("outerImage")&&(z.attr("src",n.outerImage),delete n.outerImage),$.refresh()}K.support&&V.bind("touchstart.dcrop",K.newSelection),P.hide(),ae(!0);var ne={setImage:function(e,t){$.release(),ee();var i=new Image;i.onload=function(){var a=i.width,o=i.height,s=n.boxWidth,d=n.boxHeight;z.width(a).height(o),z.attr("src",e),O.attr("src",e),g(z,s,d),M=z.width(),_=z.height(),O.width(M).height(_),V.width(M+2*R).height(_+2*R),A.width(M).height(_),J.resize(M,_),te(),"function"==typeof t&&t.call(ne)},i.src=e},animateTo:function(e,t){var i=e[0]/q,a=e[1]/E,o=e[2]/q,s=e[3]/E;if(!N){var d=Z.flipCoords(i,a,o,s),r=Z.getFixed(),l=[r.x,r.y,r.x2,r.y2],c=l,u=n.animationDelay,h=d[0]-l[0],p=d[1]-l[1],f=d[2]-l[2],m=d[3]-l[3],g=0,v=n.swingSpeed;i=c[0],a=c[1],o=c[2],s=c[3],$.animMode(!0);var w=function(){g+=(100-g)/v,c[0]=Math.round(i+g/100*h),c[1]=Math.round(a+g/100*p),c[2]=Math.round(o+g/100*f),c[3]=Math.round(s+g/100*m),g>=99.8&&(g=100),g<100?(Y(c),b()):($.done(),$.animMode(!1),"function"==typeof t&&t.call(ne))};b()}function b(){window.setTimeout(w,u)}},setSelect:X,setOptions:function(e){h(e),ae()},tellSelect:function(){return v(Z.getFixed())},tellScaled:function(){return Z.getFixed()},setClass:function(e){A.removeClass().addClass(l("holder")).addClass(e)},disable:ee,enable:te,cancel:function(){$.done(),G.activateHandlers(null,null)},release:$.release,destroy:function(){A.remove(),x.show(),x.css("visibility","visible"),e(t).removeData("dCrop")},focus:Q.watchKeys,getBounds:function(){return[M*q,_*E]},getWidgetSize:function(){return[M,_]},getScaleFactor:function(){return[q,E]},getOptions:function(){return n},ui:{holder:A,selection:I}};return s&&A.bind("selectstart",(function(){return!1})),x.data("dCrop",ne),ne},e.fn.dCrop=function(t,i){var a;return this.each((function(){if(e(this).data("dCrop")){if("api"===t)return e(this).data("dCrop");e(this).data("dCrop").setOptions(t)}else"IMG"===this.tagName?e.dCrop.Loader(this,(function(){e(this).css({display:"block",visibility:"hidden"}),a=e.dCrop(this,t),e.isFunction(i)&&i.call(a)})):(e(this).css({display:"block",visibility:"hidden"}),a=e.dCrop(this,t),e.isFunction(i)&&i.call(a))})),this},e.dCrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"dcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}},e.dCrop.Loader=function(t,i,a){var n=e(t),o=n[0];n.bind("load.jcloader",(function t(){o.complete?(n.unbind(".jcloader"),e.isFunction(i)&&i.call(o)):window.setTimeout(t,50)})).bind("error.jcloader",(function(t){n.unbind(".jcloader"),e.isFunction(a)&&a.call(o)})),o.complete&&e.isFunction(i)&&(n.unbind(".jcloader"),i.call(o))}}(djCore);var dcloze={renderView:function(e){dj(e+" .cloze_mcu input[type='checkbox']").iCheck({checkboxClass:"icheckbox_square-green"}),dj(e+" .cloze_mcu input[type='radio']").iCheck({radioClass:"iradio_square-green"})},submitAnswer:function(e){let t=[];return dj(e+">.dgqs").each((function(){let e=dj(this),i={},a=!1;dj(".cloze_mwi,.cloze_mcs,.cloze_mcu",e).each((function(){let e=dj(this),t=e.attr("id"),n=e.attr("dsort"),o=void 0!==n?n:"";if(e.hasClass("cloze_mwi")){let n=dj.trim(e.val());""!==n&&(i[t]={v:n},a=!0)}else if(e.hasClass("cloze_mcs")){let n=parseInt(e.val());n>=0&&(i[t]={v:n,o:o},a=!0)}else if(e.hasClass("cloze_mcu")){let n=[];dj("#"+t+" input.deck").each((function(){let e=dj(this);e.iCheck("update")[0].checked&&n.push(parseInt(e.val()))})),n.length>0&&(i[t]={v:e.hasClass("uradio")?n[0]:n,o:o},a=!0)}}));let n=dj(".flag",e).hasClass("active");if(n||a){let a=e.attr("rel"),o=e.attr("dsort");t.push({id:a,ans:i,flag:n?1:0,dsort:o})}})),t},userLogs:function(e){for(let t in e){let i=e[t];for(let e in i){let a=dj("#d"+t+"q_"+e),n=i[e];if(a.length>0){let e=a.attr("rel");if(dj.inArray(e,["mw","mwc","nm"])>-1)a.val(n);else if(dj.inArray(e,["mc","mcs"])>-1)a.val(n);else if(dj.inArray(e,["mav","mah","mavs","mahs"])>-1)for(let e in n){let t=n[e];dj("input.deck[value='"+t+"']",a).prop("checked",!0).parent().addClass("checked")}else dj.inArray(e,["mcv","mch","mcvs","mchs"])>-1&&dj("input.deck[value='"+n+"']",a).prop("checked",!0).parent().addClass("checked")}}}},showAnswer:function(e){for(let t in e){let i=e[t];if(dj.inArray(i.t,["mw","mwc","nm"])>-1)for(let e in i.a)1===i.a[e].g&&dj("#"+t).val(i.a[e].v);else if(dj.inArray(i.t,["mc","mcs"])>-1)for(let e in i.a)1===i.a[e].g&&dj("#"+t).val(i.a[e].i);else if(dj.inArray(i.t,["mcv","mch","mcvs","mchs","mav","mah","mavs","mahs"])>-1){dj("#"+t+" input.deck").prop("checked",!1).parent().removeClass("checked");for(let e in i.a)if(1===i.a[e].g){let a=i.a[e].i;dj("#"+t+" input.deck[value='"+a+"']").prop("checked",!0).parent().addClass("checked")}}}},showFeedback:function(e,t){dj(e+" i.dgaw").remove();for(let e in t){let i=t[e],a=dj("#"+e);i.icon=i.chk?"fa-thumbs-up":"fa-thumbs-o-down";let n=djTemplate.render('<i title="{percent}% - {feedback}" class="dgaw fa {icon}"></i>',i);dj(n).insertAfter(a)}return!1}},dgeditor=function(){let e="4.7.1.21",t={id:"",enabled:!1,length:10,templates:[{id:"title-only",title:"Chỉ tiêu đề"},{id:"title-and-sapo",title:"Tiêu đề và tóm tắt"},{id:"title-and-thumb",title:"Tiêu đề và ảnh đại diện"},{id:"title-thumb-and-sapo",title:"Tiêu đề, ảnh và tóm tắt"}],callback:function(e,t,i,a){}},i={vote:!0,type:"MCV"},a={enabled:!1,language:"vi",allow_deep:!1,perplexity:.976,replace_word:!0,callback:function(e,t,i,a){}},n={language:"vi_VN",dspellchk:a,drelated_news:t,dclozetest:i,server:djConfig.BASE_URL,select_image_after_upload:!1,uploader:"news",videoframe:!1,gmap:{address:"Hồ Hoàn Kiếm, Hà Nội",lat:21.029059572595347,lng:105.8524248719666,zoom:16},imgcrop:{width:0,height:0},question_typeid:1};return{dlatexstr:"",p6:null,k0:null,l6:null,l7:"",path:function(e,t){return this.o7(e,t)},embedContent:function(e,t,i,a,n,o){if(i.length>0&&""!==a){void 0===n&&(n="Tin liên quan:");let s=this.o7("/templates/related/"+a+".html",!0);dj.get(s,(function(s){if(""!==s){let d=['<div class="drelated"><strong>'+n+'</strong><ul class="'+a+'">'];for(let e in i){let a=i[e],n=t[a];d.push(djTemplate.render(s,n))}d.push('</ul><div class="clr"></div></div>'),e.execCommand("mceInsertContent",!1,d.join("")),dj.isFunction(o)&&o(d)}}))}},o7:function(t,i){void 0===i&&(i=!1);let a=(i?"/":djConfig.CDN_URL)+"dgrs/editor/tinymce."+e;return void 0!==t&&(a+=t),a},editor:function(e){return void 0!==e&&""!==e||(e=this.p6.id),tinymce.get(e)},getContent:function(e){let t=this.editor(e);return t?t.getContent():""},content:function(e,t){let i=this.editor(t);return i?void 0===e?i.getContent():i.setContent(e):""},tinyConfig:function(o,s){let d={cache_suffix:"?v="+e,branding:!0,min_width:300,width:720,max_width:800,min_height:200,height:395,max_height:600,theme:"modern",plugins:["autolink autosave link lists charmap preview searchreplace fullscreen colorpicker code dSpellchk","imagetools autosave","contextmenu print nonbreaking table template paste textcolor textpattern code wordcount fullpage","dReader dImage dMedia dAttach dHtml dMap dFormat dChkrs dPasteOffice"],toolbar:["undo redo | cut copy paste dPasteOffice | superscript charmap link template table | dReader dImage dMedia dAttach dHtml dMap | dFormat dChkrs dSpellchk","styleselect forecolor backcolor | bold italic underline | outdent indent | alignleft aligncenter alignright alignjustify | searchreplace code fullscreen preview print"],menubar:!1,contextmenu:"dImage dCropImg dWatermarkImage dMedia link | tableprops deletetable cell row column",imagetools_toolbar:"rotateleft rotateright | flipv fliph | editimage imageoptions",autosave_interval:"300s",autosave_retention:"30m",autosave_restore_when_empty:!0,autosave_ask_before_unload:!1,readonly:!1,resize:!1,statusbar:!0,schema:"html5",encoding:"xml",entity_encoding:"raw",element_format:"xhtml",content_css:[],style_formats:[{title:"Tiêu đề",block:"h1",classes:"pTitle"},{title:"Tóm tắt",block:"p",classes:"pHead"},{title:"Nội dung",block:"p",classes:"pBody"},{title:"Chú thích",block:"p",classes:"pCaption"},{title:"Tác giả",block:"p",classes:"pAuthor"},{title:"Nguồn bài",block:"p",classes:"pSource"},{title:"Tên đoạn",block:"p",classes:"pInterTitle"},{title:"Liên kết",block:"p",classes:"pLink"},{title:"Câu hỏi",block:"div",classes:"dQuestion"},{title:"Trả lời",block:"div",classes:"dAnswer"},{title:"Căn trái",selector:"img,table",styles:{margin:"0 4px",float:"left"}},{title:"Căn giữa",selector:"img,table",styles:{"margin-left":"auto","margin-right":"auto"}},{title:"Căn phải",selector:"img,table",styles:{margin:"0 4px",float:"right"}}],gecko_spellcheck:!1,relative_urls:!1,table_grid:!1,table_advtab:!0,table_row_advtab:!0,table_cell_advtab:!1,table_tab_navigation:!1,table_appearance_options:!1,table_class_list:[{title:"Bảng",value:"dtbln"},{title:"Box XANH nhạt",value:"xanhnhat"},{title:"Box CAM 1",value:"camnhat"},{title:"Box CAM 2",value:"camtren"},{title:"Box bảng biểu",value:"bangbieu"},{title:"Box khung viền",value:"khungvien"}],templates:[{title:"Khối XANH nhạt",url:this.o7("/templates/box/xanh-nhat.html",!0)},{title:"Khối CAM 1",url:this.o7("/templates/box/cam-nhat.html",!0)},{title:"Khối CAM 2",url:this.o7("/templates/box/cam-tren.html",!0)},{title:"Ảnh/chú thích",url:this.o7("/templates/box/anh-chu-thich.html",!0)},{title:"Khối trích dẫn 1",url:this.o7("/templates/box/trich-dan-1.html",!0)},{title:"Khối trích dẫn 2",url:this.o7("/templates/box/trich-dan-2.html",!0)},{title:"Tiêu đề trích dẫn",content:'<h1 class="pTitle">“Nội dung trích dẫn cho tiêu đề”</h1>'}],table_toolbar:"",body_class:"dbody",mobile:{theme:"modern",plugins:["link nonbreaking paste textpattern code","dFormat"],toolbar:["undo redo | cut copy paste | link dFormat code","styleselect | bold italic underline | alignleft aligncenter alignright alignjustify"]},init_instance_callback:function(e){djLog("Dragon editor "+e.id+" is now initialized.")}};this.p6=dj.extend(n,o);let r=dj.extend(d,s);this.l7="\\/"+this.p6.uploader+"\\/(\\d+/\\d+d\\d+[^\\.]+.(jpe?g|png|gif|bmp|webp))";let l=dj.extend(r,{mobile:this.p6.mobile,language:this.p6.language,drelated_news:dj.extend(t,this.p6.drelated_news),dclozetest:dj.extend(i,this.p6.dclozetest),dspellchk:dj.extend(a,this.p6.dspellchk),server:this.p6.server,uploader:this.p6.uploader,baseURL:this.o7(),videoframe:this.p6.videoframe,gmap:this.p6.gmap,imgcrop:this.p6.imgcrop,question_typeid:this.p6.question_typeid});return void 0!==this.p6.id&&(l.editor_selector="mce"+this.p6.id,l.selector="#"+this.p6.id,l.auto_focus=this.p6.id),void 0!==this.p6.selector&&(l.selector=this.p6.selector),r.readonly&&(l.plugins=[],l.toolbar=[]),l},init:function(e,t,i){this.l6=this.tinyConfig(e,t);let a=this,n=this.o7("/detm1.min.js");return dj.ajax({url:n,dataType:"script",cache:!0,success:function(){a.s8(),dj.isFunction(i)&&i()}}),this},s8:function(){document.domain=djConfig.DOMAIN,tinymce.init(this.l6)},c7:function(e,t){return e.replace(new RegExp("<"+t+"[^>]*>")," ").replace(new RegExp("</"+t+">")," ").replace(/\s{2}/gi," ")},removeHtmlTags:function(e,t){let i=this;return e=e.replace(/<\/?(\w+)[^>]*>/gi,(function(e,a){if(void 0!==t){return-1===dj.inArray(a.toLowerCase(),t)?i.c7(e,a):e}return i.c7(e,a)})),dj.trim(e.replace(/\s{2}/gi," "))},getTitle:function(e){let t=this.getElements(e,".pTitle").html();return t=this.removeHtmlTags(t,["sub","sup"]),t.replace(/`([^``]*)`/gi,(function(e,t){return"“"+t+"”"})).replace(/’([^’’]*)’/gi,(function(e,t){return"“"+t+"”"})).replace(/"([^""]*)"/gi,(function(e,t){return"“"+t+"”"})).replace(/'([^'']*)'/gi,(function(e,t){return"“"+t+"”"}))},getContentPlain:function(e){let t="editorHTML";return void 0===e&&(e=this.content()),document.getElementById(t)?(dj("#"+t).html(e),dj("#editorHTML .drelated,#editorHTML .pSource,#editorHTML .pAuthor").remove(),dj.trim(dj("#"+t).text().replace(/\s+/gi," "))):this.removeHtmlTags(e)},clearHtml:function(e){return(e=(e=(e=(e=this.formatHtml(e,"cms")).replace(/<\/?(header|nav|br|source|section|picture|article|aside|footer|details|summary|fieldset|legend|frame|figure|main)([^>]*\/?)?>/gi,"")).replace(/<img\s+([^>]+)\/?>/gi,(function(e,t){let i=[],a=["src","alt","title","style","width","height"];for(let e in a){let n=a[e],o=new RegExp(n+"=(?:'|\")([^('|\")]+)(?:'|\")"),s=t.match(o);s&&""!==s[1]&&i.push(n+'="'+s[1]+'"')}return i.length>0?"<img "+i.join(" ")+" />":""}))).replace(/<(\/)?(h\d+|p|div)[^>]*>/gi,"<$1p>")).replace(/<p>(\n|\t|\s*)<\/p>/gi,"")},k1:function(e){return(e=(e=(e=(e=e.replace(/<\/?(html|head|body|base|meta|style|title|script)([^>]*\/?)?>/gi,"")).replace(/<\/?(pre|form|input|label|option|select|button|fieldset|textarea|noframes|noscript)([^>]*\/?)?>/gi,"")).replace(/<\/?(font|span|strong|strike|em|center|big|small|address)([^>]*\/?)?>/gi,"")).replace(/<\/?(ol|ul|li)([^>]*\/?)?>/gi,"")).replace(/<\/?(abbr|acronym|bdo|cite|del|dfn|dl|ins|kbd|map|pre|q|samp|tt)([^>]*\/?)?>/gi,"")},formatHtml:function(e,t){void 0===t&&(t="cms"),e=(e=(e=(e=(e=e.replace(/\s{2}/gi," ")).replace(/(&nbsp;){2}/gi,"")).replace(/(^(<p[^>]*>(\s|&nbsp;|<br[^>]*>)*<\/p>\s*)+|(<p[^>]*>(\s|&nbsp;|<br[^>]*>)*<\/p>\s*)+$)/gi,"")).replace(/<script[^>]*>([^\x3C]+)<\/script>/gi,"")).replace(/<link[^>]+>/gi,""),e=(e=this.k1(e)).replace(/<\/?(h2|h3|h4|h5|h6)([^>]*\/?)?>/gi,""),"cms"===t&&(e=e.replace(/<\/?(mark|article|figure|figcaption)[^>]*>/gi,"")),e=(e=(e=e.replace(/\<\!--[^-]+--\>/gi,"")).replace(/<(p|div|span)[^>]*>(&nbsp;\s*)*<\/(p|div|span)>/gi,"")).replace(/<\/?\w+:[^>]+>/gi,""),"cms"===t&&(e=e.replace(/<(\/)?(div|article)[^>]*>/gi,"<$1p>"));let i=-1;return e=e.replace(/<p[^>]*>\s*(.*?)\s*<\/p>/gi,(function(a,n,o,s){if(i++,0===i){if("livenews"!==t&&-1===e.indexOf("pTitle"))return'<h1 class="pTitle">'+n+"</h1>";if("cms"===t)return'<p class="pHead">'+n+"</p>"}return"cms"===t&&1===i&&-1===e.indexOf("pHead")?'<p class="pHead">'+n+"</p>":-1===a.indexOf("pBody")&&-1===a.indexOf("pSpin")&&-1===a.indexOf("pHead")&&-1===a.indexOf("pCaption")&&-1===a.indexOf("pAuthor")&&-1===a.indexOf("pSource")&&-1===a.indexOf("pInterTitle")&&-1===a.indexOf("pLink")?'<p class="pBody">'+n+"</p>":a}))},formatCloze:function(e){return e=e.replace(/<div([^>]*)>\s*(<mark[^>]*>)/gi,(function(e,t,i){return-1===t.indexOf("dAnswer")?'<div class="dAnswer">'+i:e}))},formatQuestionCloze:function(e){return e=(e=(e=(e=(e=e.replace(/<p([^>]+)>/gi,"<p>")).replace(/<div([^>]*)>/gi,"")).replace(/<\/div>/gi,"")).replace(/<mark[^>]*>/gi,'<div class="dAnswer"><mark>')).replace(/<\/mark>/gi,"</mark></div>"),(e=this.k1(e)).replace(/\s{2}/gi," ")},l9:function(e){return!1},upload:function(e,t,i,a,n){void 0===a&&(a="0"),void 0!==n&&(this.l9=n),void 0===i&&(i=""),dLoading.show();let o=e.parentNode,s=[this.p6.server,"modules/goku/editor/upload",this.p6.uploader,t];return o.setAttribute("action",s.join("/")+"?argument="+a+"&editorid="+i+"&callback=dgeditor.h7"),o.submit(),!1},h7:function(e,t){if(dLoading.hide(),0===t.err){let i=this.editor(e);"pasteoffice"===t.argument?i.plugins.dPasteOffice.uploaded(t):"image"===t.type?i.plugins.dImage.uploaded(t):"file"===t.type?i.plugins.dAttach.uploaded(t):"thumb"===t.type?i.plugins.dMedia.thumbUploaded(t):"media"===t.type&&i.plugins.dMedia.mediaUploaded(t),this.l9(t);let a=[];dj.inArray(t.type,["image","thumb"])>-1&&a.push('<img style="float:left;margin:0 2px;width:80px;max-height:80px" src="{src}" />'),dj.inArray(t.type,["media"])>-1&&a.push("MEDIA [{sratio}] {width}x{height} / {sduration}"),a.push("<p>Upload {type} {file} <br/><b>{size}</b> thành công!</p>"),dWin.noise(djTemplate.render(a.join(""),t),3e3)}else alert("Không thể upload file (nghi ngờ chứa mã không an toàn). "+t.msg)},getMyImgSrc:function(e){let t=e.match(this.l7);return t?t[1]:""},getElements:function(e,t){return void 0===e&&(e=this.editor()),void 0===t&&(t="img"),e.$(t)},getAppSrc2embed:function(e){let t=this.getElements(e,"iframe");if(t&&t.length>0){let e=t[0].src;return""!==e&&(e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1||e.indexOf("spotify.com")>-1)?e:""}return""},getFirstMedia:function(e){return this.getElements(e,"img.dgmedia:first")},getMyMedias:function(e){return this.getElements(e,"img.dgmedia")},getMyImgs:function(e,t){let i=this.getElements(e,t),a=[];if(i)for(let e in i){let t=i[e],n=t.src;if(n&&""!==n){let e=this.getMyImgSrc(n);""===e||-1!==dj.inArray(e,a)||this.imgIsMedia(t)||a.push(e)}}return a},imgIsMedia:function(e){let t=dj(e).attr("data-encode");return void 0!==t&&""!==t},saveExtenalImages:function(e,t){let i=this.getElements(e,"img");if(i&&i.length>0){let a={},n={},o=!1;for(let t in i){let s=i[t],d=s.src,r=dj.sec(d);if(d&&""!==d&&""===this.getMyImgSrc(d)&&!this.imgIsMedia(s)){if(0===d.indexOf("blob:")){let t=e.editorUpload.blobCache.getByUri(d);t&&(a[r]="data:"+t.blob().type+";base64,"+t.base64())}else a[r]=d;n[r]=s,o=!0}}if(o){let e=[this.p6.server,"modules/goku/editor/save_extenal_images",this.p6.uploader];dj.postJSON(e.join("/"),a,(function(e){if(0===e.err){for(let t in e.data){let i=n[t];i.src=e.data[t],i.removeAttribute("data-mce-src")}t(e)}else dDialog.alertError("Không thể lấy ảnh tự động cho văn bản")}))}else t(null)}else t(null);return!1}}}(),dgtts=class{constructor(){this.p8={},this.o8="https://vietlong.org",this.p6={}}l9(e,t){if(dj.isFunction(t)){let i=1e3*e.duration+this.p6.delta;setTimeout((function(){t(e)}),i)}return!1}speech(e){this.p6=dj.extend({cmd:"fullname",text:"",delta:500,callback:function(){return!1}},e),this.p6.text=dj.trim(this.p6.text);let t=dj.sec(this.p6.text);if(void 0!==this.p8[t]){let e=this.p8[t];return e.audio.play(),this.l9(e,this.p6.callback)}let i=this,a=this.o8+"/apps/open/text2speech/"+this.p6.cmd+"/"+djConfig.APPID+"/"+t.substr(5,15);return dj.getJSONP(a+"/"+this.p6.text.length,{text:this.p6.text},(function(e){if(0===e.err){let a="tts"+djConfig.APPID,n=i.o8+"/dgtts/"+i.p6.cmd+"/"+e.data.file,o=djTemplate.render('<audio src="{src}"><source type="audio/mp3" src="{src}" /></audio>',{src:n});document.getElementById(a)?dj("#"+a).html(o):dj('<div id="'+a+'" style="display:none">'+o+"</div>").appendTo(document.body);let s=dj("#"+a+">audio")[0],d={audio:s,duration:e.data.duration,size:e.data.size};i.p8[t]=d,s.play(),i.l9(d,i.p6.callback)}})),!1}},img4cms={relatedImgs:function(e){let t=[];return dj(e+" .drelated img").each((function(){t.push(dj(this).attr("src"))})),t},captions:function(e){dj(e+" img").each((function(){let e=dj(this),t=["width","height"];if(!e.hasClass("dgmd")&&!e.hasClass("dgmv"))for(let i in t){let a=t[i],n=e.css(a);0!==n&&"0px"!==n||e.css(a,"auto")}})),dj(e+">.pCaption").each((function(e){let t=dj(this),i=t.prev(),a={},n=["text-align","width"];for(let e in n){let i=n[e];a[i]=t.css(i)}if(i.html().indexOf("<img")>-1){let n="imgcaption"+e,o=dj("img:last",i),s=o.width();0===s&&(o.attr("rel",n),o.load((function(){let e=this;function t(){let t=dj(e),i=t.attr("rel");dj("#"+i).width(t.width())}t(),setTimeout((function(){t()}),1e3)}))),a.width=s+"px";let d=[];for(let e in a)d.push(e+":"+a[e]);i.append('<i id="'+n+'" class="iCaption" style="'+d.join(";")+'">'+t.html()+"</i>"),t.remove()}}))},a0:function(e,t){let i={margin:"0 auto"};e.hasClass("dgmedia")&&(i.height=0),e.css(i),t.removeClass("pCaption").addClass("pBody").css({"text-align":"center"})},forbody:function(e){let t=this;dj(e+">.pCaption>img").each((function(){let e=dj(this),i=e.parent();if(""!==dj.trim(i.text())&&1===i.length){let a=i.text();t.a0(e,i),i.empty(),i.append(e),i.append('<i class="iCaption">'+a+"</i>")}})),dj(e+">.pCaption,"+e+">.pBody,"+e+">.pCenter").each((function(){let e=dj(this);e.html().indexOf("<img")>-1&&t.a0(dj("img",e),e)}))}},dmap=function(){let e=null,t=null;return{init:function(e){if(null===t){let i=document.createElement("script");i.type="text/javascript",i.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=dmap.q0",document.body.appendChild(i),t=dj.extend({zoom:16,by:"addr"},e)}else this.q0(dj.extend({zoom:16},e))},val:function(){return{by:t.by,lat:t.lat,lng:t.lng,zoom:t.zoom}},q0:function(e){void 0!==e&&(t=e),"addr"===t.by?this.loadFromAddress(t.addr):this.loadFromLatLng(t.lat,t.lng)},loadFromLatLng:function(e,t){this.m0(new google.maps.LatLng(e,t))},loadFromAddress:function(t){let i=this;null===e&&(e=new google.maps.Geocoder),e&&e.geocode({address:t},(function(e,t){t===google.maps.GeocoderStatus.OK?i.m0(e[0].geometry.location):alert("Geocode was not successful for the following reason: "+t)}))},m0:function(e){let i=this,a=new google.maps.Map(t.elmap,{zoom:t.zoom,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,disableDoubleClickZoom:!0});google.maps.event.addListener(a,"center_changed",(function(){let e=a.getCenter();t.lat=e.lat(),t.lng=e.lng()})),google.maps.event.addListener(a,"dblclick",(function(e){t.lat=e.latLng.lat(),t.lng=e.latLng.lng(),i.q1(t)})),google.maps.event.addListener(a,"zoom_changed",(function(){t.zoom=a.getZoom()}));let n=new google.maps.Marker({position:e,draggable:!0,map:a});google.maps.event.addListener(n,"dragend",(function(){let e=n.getPosition();a.panTo(e),t.lat=e.lat(),t.lng=e.lng(),i.q1(e)})),google.maps.event.addListener(n,"dblclick",(function(){t.zoom=a.getZoom()+1,t.zoom>=20&&(t.zoom=10),a.setZoom(t.zoom)}))},q1:function(e){null}}}(),dmedia=function(){let e=["application/kapsulefile","audio/mpeg","audio/x-ms-wma","audio/mid","audio/mp3","audio/ogg","audio/x-wav"],t=["application/octet-stream","video/x-flv","flv-application/octet-stream","application/x-shockwave-flash"],i=["video/mp4","video/wmv","video/mpeg","video/x-ms-asf","video/x-ms-wmv","video/webm","video/ogg"];return{a1:!1,m3:"",k2:!1,r8:!1,m4:"",m5:"",f1:"",m6:"",html5:!0,autoPlay:!1,isAudio:!1,isVideo:!1,isFlash:!1,os_device:function(){let e=window.navigator.userAgent;this.r8=e.indexOf("MSIE ");let t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};return t},r9:function(a,n,o,s,d,r){this.m6=r,this.m3=a,""!==n&&null!==n||(n="/apps/open/media/thumb?p="+this.m6+"/video_default"),"//"===n.substring(0,2)&&(n=window.location.protocol+n),"//"===o.substring(0,2)&&(o=window.location.protocol+o),this.m4=n,this.m5=o,this.f1=s,this.autoPlay=d;let l=this.os_device();return this.k2=!(l.Android()||l.iOS()||!l.any()),this.a1=FlashDetect.installed,this.isAudio=dj.inArray(this.f1,e)>-1,this.isVideo=dj.inArray(this.f1,i)>-1,this.isFlash=dj.inArray(this.f1,t)>-1,this.html5=!this.isFlash,this},h9:function(){let e=djConfig.STATIC_URL+"flash/flvplayer.swf",t="file="+this.m5+"&amp;image="+this.m4,i='<embed name="'+this.m3+'" bgcolor="#000000" border="0" height="100%" width="100%" src="'+e+'" data="'+e+'"allowfullscreen="true" allownetworking="all" allowscriptaccess="always" pluginspage="http://www.macromedia.com/go/getflashplayer" wmode="transparent" loop="true" quality="high" play="true" type="application/x-shockwave-flash" flashvars="'+t+'" />';return this.r8>0&&dj.browser.version<=8?'<object id="'+this.m3+'" height="100%" width="100%" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param value="'+e+'" name="movie" /><param value="high" name="quality" /><param value="transparent" name="wmode" /><param value="true" name="allowfullscreen" /><param value="always" name="allowScriptAccess" /><param value="'+t+'" name="flashvars" />'+i+"</object>":'<object type="application/x-shockwave-flash" id="'+this.m3+'" data="'+e+'" height="100%" width="100%" /><param value="high" name="quality"><param value="transparent" name="wmode" /><param value="true" name="allowfullscreen" /><param value="always" name="allowScriptAccess" /><param value="'+t+'" name="flashvars" />'+i+"</object>"},canPlay:function(){return this.html5||this.a1},render:function(e){void 0===e&&(e=!0);let t=this;if(this.html5){let a=!1,n={img:t.m4,src:t.m5,vw:'width="100%"',vh:'height="100%"'};if(n.play=this.autoPlay?'autoplay="true" play="true"':"",this.isAudio){n.ogg=n.src.replace(/.mp3/i,".ogg"),n.type=this.f1;let e='<audio type="{type}" class="dgadp" controls="" src="{src}"><source src="{ogg}" type="audio/mpeg" /></audio>';return djTemplate.render(e,n)}let o=document.createElement("video");if(a=!(n.src.indexOf(".flv")>0||!dj.isFunction(o.canPlayType))&&!!o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),a){let a="";function i(i){return'<video id="'+t.m3+'" class="dgvdp" poster="{img}" {play} preload="none" '+(e?'controls="controls" ':"")+'{vw} {vh} name="mediaplayer" controlslist="nodownload" onclick="return dmediaPlayVideo(this)"><img alt="" class="dgmv" src="{img}" id="'+t.m3+'ie8img" {vw} {vh}/>'+i+"</video>"}return n.src.indexOf(".mp4")>0&&o.canPlayType("video/mp4;codecs=avc1.42E01E,mp4a.40.2")&&(a=i('<source codecs="H.264" src="{src}" type="video/mp4"></source>')),n.src.indexOf(".webm")>0&&o.canPlayType("video/webm;")&&(a=i('<source src="{src}" type="video/webm"></source>')),(n.src.indexOf(".ogv")>0||n.src.indexOf(".ogg")>0)&&o.canPlayType("video/ogg;")&&(a=i('<source src="{src}" type="video/ogg"></source>')),djTemplate.render(a,n)}}return this.a1?t.h9():"Browser not support play this media"},playAudio:function(){let e='<source src="'+this.m5.replace(/.mp3/i,".ogg")+'" type="'+this.f1+'" />',t=dj("audio.dgadp").attr("src",this.m5).html(e);return this.autoPlay&&t[0].play(),t}}};function dmediaPlayVideo(e){return e.play(),!1}function dmediaScroll(e){let t=dj(e).not("[autoplay='autoplay']");function i(e,t){t?e.get(0).play():e.get(0).pause(),e.attr("play",t?1:0)}function a(){let e=dj(window).scrollTop(),a=e+100,n=e+dj(window).height()-100;t.each((function(e,t){let o=dj(this),s=o.offset().top,d=o.height()+s;i(o,a<d&&n>s)}))}window.addEventListener("scroll",a,!1),window.addEventListener("resize",a,!1)}var djaudio={s2:function(){return"//"+djConfig.DCDN.domain+"/dgrs/djmd/css"},k5:function(e){return djTemplate.render('<div id="d{audiotype}{idx}" class="{selector} d{audiotype}" rel="{idx}"><audio class="hidden" src="{media}"><source type="{contenttype}" src="{media}" /></audio> <div class="dta-main"> <a href="javascript:void(0)" onclick="return djaudio.play(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn play"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"> <path class="dgcolor" fill="{buttoncolor}" d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/> </svg> </a> <a href="javascript:void(0)" onclick="return djaudio.pause(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn pause hidden"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"> <path class="dgcolor" fill="{buttoncolor}" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/> </svg> </a> <div class="dt-graph prel"> <div class="aud-text"><span class="curent">0:0</span><span>/</span><span class="duration">{duration}</span></div> <div class="aud-bg"><div class="seek" style="width:0"></div></div> </div> <div class="speech-menu"> <a class="aud-btn speech" href="javascript:void(0);"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"> <path class="dgcolor" fill="{buttoncolor}" d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/> <path d="M0 0h24v24H0z" fill="none"/> </svg> </a> </div> <div class="aud-btn now baonoi">{title}</div> </div></div>',e)},c8:function(e){return e.imagethumb=dj.isNull(e.thumb)?"":'<img src="'+e.thumb+'" alt="" class="thumb" />',djTemplate.render('<div class="djplayer">{imagethumb}<div id="d{audiotype}{idx}" class="{selector} d{audiotype}" title="{title}" rel="{idx}"><audio class="hidden" src="{media}"><source type="{contenttype}" src="{media}" /></audio> <div class="dta-main"> <div class="speech-menu"> <a class="aud-btn speech" href="javascript:void(0);"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"> <path class="dgcolor" fill="{buttoncolor}" d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/> <path d="M0 0h24v24H0z" fill="none"/> </svg> </a> </div> <div class="dt-graph prel"> <div class="aud-text pr"><span class="curent">0:0</span></div> <div class="aud-bg"><div class="seek" style="width:0"></div></div> <div class="aud-text pl"><span class="duration">{duration}</span></div> </div> </div> <div class="dta-main"> <div class="volumn"> <div class="nut"> <a href="javascript:void(0)" onclick="return djaudio.giamtieng(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn giamtieng"> <svg width="10" height="16" viewBox="0 0 10 16" class="dgcolor" fill="{buttoncolor}" xmlns="http://www.w3.org/2000/svg"> <path d="M10 1.00613C10 0.133106 8.9597 -0.320722 8.31977 0.273127L4.4476 3.86651C4.35513 3.95232 4.23364 4.00001 4.10749 4.00001H1.5C0.671573 4.00001 0 4.67158 0 5.50001V10.5C0 11.3284 0.671573 12 1.5 12H4.10749C4.23364 12 4.35513 12.0477 4.4476 12.1335L8.31977 15.7269C8.9597 16.3207 10 15.8669 10 14.9939V1.00613Z"/> </svg> </a> </div> <div class="aud-bg"><div class="seek" style="width:100px"></div></div> <div class="nut"> <a href="javascript:void(0)" onclick="return djaudio.tangtieng(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn tangtieng"> <svg width="16" height="16" viewBox="0 0 16 16" class="dgcolor" fill="{buttoncolor}" xmlns="http://www.w3.org/2000/svg"> <path d="M10 1.00613C10 0.133106 8.9597 -0.320722 8.31977 0.273127L4.4476 3.86651C4.35513 3.95232 4.23364 4.00001 4.10749 4.00001H1.5C0.671573 4.00001 0 4.67158 0 5.50001V10.5C0 11.3284 0.671573 12 1.5 12H4.10749C4.23364 12 4.35513 12.0477 4.4476 12.1335L8.31977 15.7269C8.9597 16.3207 10 15.8669 10 14.9939V1.00613ZM13.2537 2.62764C13.4594 2.44337 13.7755 2.46071 13.9598 2.66638C16.676 5.69797 16.676 10.3021 13.9598 13.3337C13.7756 13.5394 13.4594 13.5567 13.2538 13.3724C13.0481 13.1882 13.0308 12.872 13.215 12.6664C15.591 10.0146 15.591 5.98548 13.215 3.33369C13.0307 3.12802 13.0481 2.81191 13.2537 2.62764ZM12.0785 10.9333C11.8393 10.7954 11.757 10.4897 11.8948 10.2504C12.671 8.90288 12.7265 7.19163 11.8942 5.74995C11.7561 5.5108 11.838 5.205 12.0772 5.06693C12.3163 4.92886 12.6221 5.0108 12.7602 5.24995C13.7782 7.01322 13.7084 9.10544 12.7614 10.7496C12.6235 10.9888 12.3178 11.0711 12.0785 10.9333Z"/> </svg> </a> </div> </div> <div class="panel"> <a href="javascript:void(0)" onclick="return djaudio.giamtoc(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn giamtoc"> <svg width="23" height="22" viewBox="0 0 23 22" class="dgcolor" fill="{buttoncolor}" xmlns="http://www.w3.org/2000/svg"> <path d="M1 0C0.447715 0 0 0.447715 0 1V7C0 7.55228 0.447715 8 1 8H7C7.55228 8 8 7.55228 8 7C8 6.44772 7.55228 6 7 6H2.69913C4.38331 3.701 7.80186 2 11.7499 2C15.85 2 18.8577 3.92499 21.1562 7.53688C21.4527 8.00282 22.0708 8.14017 22.5367 7.84366C23.0027 7.54715 23.14 6.92907 22.8435 6.46312C20.2448 2.37946 16.6497 0 11.7499 0C7.88484 0 4.27677 1.44235 2 3.7471V1C2 0.447715 1.55228 0 1 0ZM8.26708 10.0363C8.70026 10.1563 9.00015 10.5505 9.00015 11V21C9.00015 21.5523 8.55244 22 8.00015 22C7.44787 22 7.00015 21.5523 7.00015 21V13.7349C6.57408 14.1274 6.07688 14.5202 5.51465 14.8575C5.04107 15.1416 4.42681 14.9881 4.14266 14.5145C3.85851 14.0409 4.01208 13.4267 4.48566 13.1425C5.29664 12.6559 5.96552 11.9928 6.43989 11.4322C6.67434 11.1551 6.85466 10.9109 6.97467 10.7388C7.03455 10.6528 7.07902 10.5854 7.10735 10.5414C7.1215 10.5194 7.13158 10.5034 7.1375 10.4938L7.14288 10.4851L7.14372 10.4837C7.37532 10.0995 7.83457 9.91648 8.26708 10.0363ZM12.6481 11.9472C13.378 10.7395 14.5795 10 16.2383 10C17.8971 10 19.0985 10.7395 19.8285 11.9472C20.5129 13.0796 20.7383 14.5441 20.7383 16C20.7383 17.4559 20.5129 18.9204 19.8285 20.0528C19.0985 21.2605 17.8971 22 16.2383 22C14.5795 22 13.378 21.2605 12.6481 20.0528C11.9637 18.9204 11.7383 17.4559 11.7383 16C11.7383 14.5441 11.9637 13.0796 12.6481 11.9472ZM14.3597 12.9817C13.9504 13.659 13.7383 14.6945 13.7383 16C13.7383 17.3055 13.9504 18.341 14.3597 19.0183C14.7235 19.6202 15.2721 20 16.2383 20C17.2045 20 17.753 19.6202 18.1168 19.0183C18.5262 18.341 18.7383 17.3055 18.7383 16C18.7383 14.6945 18.5262 13.659 18.1168 12.9817C17.753 12.3798 17.2045 12 16.2383 12C15.2721 12 14.7235 12.3798 14.3597 12.9817Z"/> </svg> </a> <a href="javascript:void(0)" onclick="return djaudio.play(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn play"> <svg width="48" height="52" viewBox="0 0 48 52" class="dgcolor" fill="{buttoncolor}" xmlns="http://www.w3.org/2000/svg"> <path d="M2.79996 0.400024C2.23417 0.400024 1.69155 0.624786 1.29147 1.02486C0.891392 1.42494 0.66663 1.96756 0.66663 2.53336C0.666625 2.53614 0.666625 2.53891 0.66663 2.54169V26V49.4584C0.666625 49.4611 0.666625 49.4639 0.66663 49.4667C0.66663 50.0325 0.891392 50.5751 1.29147 50.9752C1.69155 51.3753 2.23417 51.6 2.79996 51.6C3.24404 51.5988 3.67665 51.4589 4.03746 51.2L4.04163 51.2042L46.3541 27.9375C46.7254 27.7677 47.0402 27.4948 47.261 27.1514C47.4819 26.8079 47.5995 26.4083 47.6 26C47.6002 25.5803 47.4766 25.1698 47.2446 24.82C47.0126 24.4701 46.6826 24.1965 46.2958 24.0334L4.04163 0.795858H4.03746C3.67615 0.538455 3.24359 0.400092 2.79996 0.400024Z"/> </svg> </a> <a href="javascript:void(0)" onclick="return djaudio.pause(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn pause hidden"> <svg width="40" height="48" viewBox="0 0 40 48" class="dgcolor" fill="{buttoncolor}" xmlns="http://www.w3.org/2000/svg"> <path d="M5.06672 0.533325C2.70938 0.533325 0.800049 2.44266 0.800049 4.79999V43.2C0.800049 45.5573 2.70938 47.4667 5.06672 47.4667H9.33338C11.6907 47.4667 13.6 45.5573 13.6 43.2V4.79999C13.6 2.44266 11.6907 0.533325 9.33338 0.533325H5.06672ZM30.6667 0.533325C28.3094 0.533325 26.4 2.44266 26.4 4.79999V43.2C26.4 45.5573 28.3094 47.4667 30.6667 47.4667H34.9334C37.2907 47.4667 39.2 45.5573 39.2 43.2V4.79999C39.2 2.44266 37.2907 0.533325 34.9334 0.533325H30.6667Z"/> </svg> </a> <a href="javascript:void(0)" onclick="return djaudio.tangtoc(this,{idx},\'d{audiotype}{idx}\');" class="aud-btn tangtoc"> <svg width="23" height="22" viewBox="0 0 23 22" class="dgcolor" fill="{buttoncolor}" xmlns="http://www.w3.org/2000/svg"> <path d="M1.84379 7.53688C4.14226 3.92499 7.14999 2 11.2501 2C15.1981 2 18.6167 3.701 20.3009 6H16C15.4477 6 15 6.44772 15 7C15 7.55228 15.4477 8 16 8H22C22.5523 8 23 7.55228 23 7V1C23 0.447715 22.5523 0 22 0C21.4477 0 21 0.447715 21 1V3.7471C18.7232 1.44235 15.1152 0 11.2501 0C6.35026 0 2.75516 2.37946 0.156465 6.46312C-0.140043 6.92907 -0.00269076 7.54715 0.463251 7.84366C0.929192 8.14017 1.54728 8.00282 1.84379 7.53688ZM15.2383 10C13.5795 10 12.378 10.7395 11.6481 11.9472C10.9637 13.0796 10.7383 14.5441 10.7383 16C10.7383 17.4559 10.9637 18.9204 11.6481 20.0528C12.378 21.2605 13.5795 22 15.2383 22C16.8971 22 18.0985 21.2605 18.8285 20.0528C19.5129 18.9204 19.7383 17.4559 19.7383 16C19.7383 14.5441 19.5129 13.0796 18.8285 11.9472C18.0985 10.7395 16.8971 10 15.2383 10ZM12.7383 16C12.7383 14.6945 12.9504 13.659 13.3597 12.9817C13.7235 12.3798 14.2721 12 15.2383 12C16.2045 12 16.753 12.3798 17.1168 12.9817C17.5262 13.659 17.7383 14.6945 17.7383 16C17.7383 17.3055 17.5262 18.341 17.1168 19.0183C16.753 19.6202 16.2045 20 15.2383 20C14.2721 20 13.7235 19.6202 13.3597 19.0183C12.9504 18.341 12.7383 17.3055 12.7383 16ZM8.00015 11C8.00015 10.5505 7.70026 10.1563 7.26708 10.0363C6.83457 9.91648 6.37532 10.0995 6.14372 10.4837L6.14288 10.4851L6.1375 10.4938C6.13158 10.5034 6.1215 10.5194 6.10735 10.5414C6.07902 10.5854 6.03455 10.6528 5.97467 10.7388C5.85466 10.9109 5.67434 11.1551 5.43989 11.4322C4.96552 11.9928 4.29664 12.6559 3.48566 13.1425C3.01208 13.4267 2.85851 14.0409 3.14266 14.5145C3.42681 14.9881 4.04107 15.1416 4.51465 14.8575C5.07688 14.5202 5.57408 14.1274 6.00015 13.7349V21C6.00015 21.5523 6.44787 22 7.00015 22C7.55244 22 8.00015 21.5523 8.00015 21V11Z"/> </svg> </a> </div> </div></div>',e)},d8:function(e){return"tts"===e.audiotype?this.k5(e):this.c8(e)},audios:{},support:!1,selector:"djaudio",curentid:-1,curtime:-1,a2:500,playing:-1,option:{},f2:{},q7:function(e){return(e=parseInt(e))>9?e:"0"+e},f3:function(e){if(void 0!==e){let t=(e=e.replace(/\.(\d+)$/,"")).split(":");return t.length>=3?parseInt(t[0])>0?e:this.q7(t[1])+":"+this.q7(t[2]):e}return""},n0:function(e){let t=0,i=0;return e>=60*(i+1)&&(e>=3600*(t+1)&&(t=Math.floor(e/3600)),i=Math.floor(e/60),e-=3600*t+60*i),(t>0?this.q7(t)+":":"")+this.q7(i)+":"+this.q7(Math.floor(e))},a9:function(e,t){let i=e.currentTime;if(i>=e.duration)clearInterval(this.curtime),dj(".curent",t).text("00:00"),dj(".seek",t).css({width:0}),dj(".pause",t).addClass("hidden"),dj(".play",t).removeClass("hidden");else{let a=Math.floor(100*e.currentTime/e.duration);dj(".curent",t).text(this.n0(i)),dj(".seek",t).css({width:a+"%"})}},f4:function(e,t){let i=this;this.curtime=setInterval((function(){i.a9(e,t)}),this.a2)},k6:function(e,t,i,a){this.curentid=t;let n=this.audios[t];if("play"===e){let e=dj.sec(n.src);if(this.f2[e]||(this.f2[e]=0),this.f2[e]>=this.option.maxPlay)return this.option.onMaxPlayed(),!1;this.f2[e]++}return dj("#"+a+" .play").removeClass("hidden"),dj("#"+a+" .pause").addClass("hidden"),t!==this.curentid&&this.curentid>-1&&(clearInterval(this.curtime),this.audios[this.curentid].pause()),n.play(),this.playing=t,this.option.onPlay(),i.addClass("hidden"),dj("#"+a+" .pause").removeClass("hidden"),n},giamtoc:function(e,t,i){return!1},tangtoc:function(e,t,i){return!1},tangtieng:function(e,t,i){return!1},giamtieng:function(e,t,i){return!1},play:function(e,t,i){let a=dj(e),n=this.k6("play",t,a,i);if(n){let e=a.parent().parent(),t=dj("#"+i+" .duration");""===dj.trim(t.text())&&t.text(this.n0(Math.round(n.duration))),this.f4(n,e)}return!1},pause:function(e,t,i){if(!this.option.allowPause)return!1;clearInterval(this.curtime),this.curentid=t;let a=dj(e),n=a.parent(),o=this.audios[t];return a.addClass("hidden"),o.pause(),this.playing=-1,this.option.onPause(),dj(".play",n).removeClass("hidden"),!1},init:function(e){null==e&&(e={});let t=this;this.support=Hls.isSupported(),this.option=dj.extend({type:"tts",color:"transparent",allowSeek:!0,allowPause:!0,maxPlay:1e3,onPlay:function(e){dj.isFunction(e)&&e()},onPause:function(e){dj.isFunction(e)&&e()},onMaxPlayed:function(e){dWin.noise("Đã nghe quá số lần quy định."),dj.isFunction(e)&&e()}},e),dj("."+this.selector).each((function(){let e=dj(this),i=e.attr("rel"),a=dj("audio",e),n=dj("audio",e)[0],o=a.attr("src");if(o.indexOf(".m3u8")>0)if(t.support){let e=new Hls;e.loadSource(o),e.attachMedia(n)}else n.canPlayType("application/vnd.apple.mpegurl")&&(n.src=o);t.audios[i]=n,dj(".aud-bg",e).mousedown((function(e){if(!t.option.allowSeek)return dWin.noise("Không cho phép tua."),!1;let i=dj(this),a=i.parent().parent().parent(),n=a.attr("rel"),o=i.offset().left,s=(e.pageX-o)/i.width(),d=t.k6("seek",n,dj(".play",a));d&&(d.currentTime=s*d.duration,clearInterval(t.curtime),t.f4(d,a))}))}))}};function dmediaEmbed(e){let t={169:1.77778,916:.5625,43:1.33333,34:.75,23:.66667,32:1.5,11:1},i=document.getElementById("dcontent")?dj("#dcontent").width():dj(document).width();function a(e){return isNaN(e)||""===e?0:parseInt(e)}function n(e,t,i){let a={src:e.indexOf("http")>=0?e:"https://"+e,width:t,height:i};return djTemplate.render('<div class="dplayerapp dspotify"><iframe src="{src}" width="{width}" height="{height}" title="Spotify player" frameBorder="0" allow="autoplay;clipboard-write;encrypted-media;fullscreen;picture-in-picture" allowfullscreen></iframe></div>',a)}function o(e,t,i){let a={src:e.indexOf("http")>=0?e:"https://"+e,width:t,height:i};return djTemplate.render('<div class="dplayerapp dyoutube"><iframe width="{width}" height="{height}" src="{src}" title="YouTube player" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture" allowfullscreen></iframe></div>',a)}function s(e,t,i,a){for(let i in e){let s=e[i],r=s.id,l=t[r],c=l.element,u=l.attr,h=c.parent();if(!h.hasClass("dmedia"))if(void 0!==s.youtube&&s.youtube)l.element.replaceWith(o(s.media,u.width,u.height));else if(void 0!==s.spotify&&s.spotify)l.element.replaceWith(n(s.media,u.width,u.height));else{let e=new dmedia,t=s.mediatype,n=h.attr("class"),o=void 0===n||""===n?["pBody"]:n.split(" "),p=s.m3u8||"audio"===t;if(d.hls&&p){s.idx=parseInt(i)+1,s.autoplay=u.autoplay,s.autoplaystr=s.autoplay?"true":"false";let e=c.attr("data-title"),n="";if(s.title=dj.isNull(e)?"":e,"video"===t){s.ratio=u.ratio,s.advmode=a&&""!==s.vadid&&u.allowad?"true":"false",u.fullsize&&o.push("iFull"),s.width=u.width+"px",s.height=u.height+"px",s.cls=o.join(" ");let e='<div id="{id}" class="{cls} dvjmedia dvjm{ratio}"><div class="djvideostream" embed-type="{type}" data-width="{width}" data-height="{height}" videoid="{id}" data-info="{id}" data-namespace="{namespace}" data-title="{title}" data-duration="{duration}" data-encode="{encode}" data-autoplay="{autoplaystr}" data-advmode="{advmode}" data-ads="{vadtimes}" data-thumb="{thumb}" data-location="" data-vid="{media}" data-contentid=""></div></div>';n+=djTemplate.render(e,s)}else"audio"===t&&(s.selector=djaudio.selector,s.duration=djaudio.f3(s.duration),s.audiotype=void 0!==d.audio.type?d.audio.type:"tts",s.buttoncolor=void 0!==d.audio.color?d.audio.color:"transparent",n+=djaudio.d8(s));""!==n&&(h.replaceWith(n),h=dj("#"+r))}"video"===t&&(h.addClass("dg"+s.mediatype),h.addClass("dmedia"),u.width>0&&h.css({width:u.width+"px"}),u.height>0&&h.css({height:u.height+"px"})),c.css({width:"100%",height:"100%"}),p||(e.r9(r,s.thumb,s.media,s.contenttype,s.autoplay,s.uploader),l.element.replaceWith(e.render()))}}if(!d.hls&&i){dmedia().os_device().iOS()||dmediaScroll(".dmedia>video")}}let d=dj.extend({ismobile:dj.browser.ismobile,width:0,height:0,scale:t[169],allow_cdn:!0,hls:!1,id:"48",isAd:!0,type:1,useBg:!0,audio:{type:"tts",color:"transparent"}},e);d.height=0!==d.scale?Math.round(d.width/d.scale):0;let r=djConfig.DCDN.allow&&d.allow_cdn,l=djConfig.DCDN.domain,c="//"+l,u=function(n){let o={},s=[],d=!1,r=!1;return dj("img.dgmedia,b.dgmedia").each((function(l){let c=dj(this),u=c.attr("data-encode"),h=c.attr("data-type"),p=function(e,t){if(!dj.isNull(e.style.width)){let t=e.style.width;return""===t||t.indexOf("%")>0?t:parseInt(t.replace("px",""))}return 0}(c[0]),f="true"===c.attr("data-autoplay");(""===p||0===p||n.ismobile)&&(p=e.width);let m=c.attr("data-args"),g={update:"10/11/2020",mobile:n.ismobile,duration:0,fullsize:!1,ratio:169,autoplay:f,allowad:!0,streamhls:!0,width:p,video_width:0,video_height:0};dj.isNull(m)||(m=m.split(":"),dj.extend(g,{duration:a(m[0]),fullsize:a(m[1])>0,ratio:a(m[2]),autoplay:a(m[3])>0,allowad:a(m[4])>0,streamhls:a(m[5])>0,width:n.ismobile?p:m[6],video_width:a(m[8]),video_height:a(m[9])}));let v=dj.sec(u),w="b"===this.tagName.toLowerCase()||"audio/mp3"===h||"audio/mpeg"===h?"audio":"video",b=function(a,n,o){let s=dj.isNull(t[a])?t[169]:t[a];return{scale:s,width:n=o?i:dj.isNumeric(n)?parseInt(n):n.indexOf("%")>0?Math.round(parseInt(n.replace("%"))*e.width/100):parseInt(n.replace("px","")),height:0===s?0:Math.round(n/s)}}(g.ratio,g.width,g.fullsize);dj.extend(g,b,{type:w}),c.attr("id",v),s.push(u),o[v]={id:v,element:c,attr:g},"video"===w?d=!0:r=!0})),{encodes:s,items:o,video:d,audio:r}}(d);if(function(e,t){if(e&&t){let e=window.innerWidth>window.innerHeight,t=window.innerWidth;window.addEventListener("resize",(function(){let i=window.innerWidth>window.innerHeight;i!==e&&(e=i,dj(".dvjmedia").each((function(){let e=dj(this),i=dj(".djvideostream",e),a=parseFloat(i.attr("data-scale")),n=parseInt(i.attr("data-width").replace("px","")),o=Math.round(window.innerWidth*n/t),s={width:o+"px",height:Math.round(o/a)+"px"};e.css(s),dj(".djvideostream,.djvideostream .DjVideo,video",e).css(s),dj(".DjVideo-loading-vid-icon",e).remove()})))}))}}(d.ismobile,u.video),u.encodes.length>0){let e=u.encodes.join(";"),t=dj.sec(e).substring(0,25),i={dapp:djConfig.DOMAIN,ids:e,sec:t};r?(u.audio&&dj.loadStyle(c+"/dgrs/djmd/css/djaudio3.css"),dj.ajax({url:c+"/dgrs/djmd/js/player.dm3.js",dataType:"script",cache:!0,success:function(){let e=[c,"media","embeds",t,d.ismobile?"mobile":"desktop",d.hls?"1":"0"].join("/"),a=window.location.href.match(/\/(\d+)\.htm/);a&&(e+="?id="+a[1]),dj.getJSONP(e,i,(function(e){0===e.err&&(s(e.data,u.items,u.video,d.isAd),u.video&&(djvideo.isAd=d.isAd,djvideo.domain=l,djvideo.serverUrl=c,djvideo.configs=e.djvideo,e.m3u8&&djvideo.init(".dvjmedia",d)),u.audio&&djaudio.init(d.audio))}),"djvideo"+t)}})):dj.getJSONP(djConfig.BASE_URL+"/apps/open/media/embeds",i,(function(e){0===e.err&&s(e.data,u.items,u.video,!1)}))}}!function(e){"use strict";let t={action:"/base/drop_upload",label:$DSTR.upload.dragfile,maxQueue:2,maxSize:5242880,postData:{},postKey:"file",debug:!1,init:function(e){},start:function(t,i){let a="",n=this;for(let t=0;t<i.length;t++)a+='<li data-index="'+i[t].index+'"><input class="fileid" type="hidden"/><label>'+i[t].name+'</label> <a class="link" target="_blank">('+e.fileSize(i[t].size)+')</a><span>...</span> <b class="close"></b></li>';e("ul.filelists",t).append(a);for(let a=0;a<i.length;a++)e('ul.filelists li[data-index="'+i[a].index+'"] b.close',t).click((function(i){i.stopPropagation();let a=e(this).parent();n.fileRemove(t,a.find("input.fileid").val(),a)}))},complete:function(e){dWin.noise($DSTR.upload.complete_all)},fileStart:function(t,i){e('ul.filelists li[data-index="'+i.index+'"] span',t).html("0%")},fileProgress:function(t,i,a){e('ul.filelists li[data-index="'+i.index+'"] span',t).html(a+"%")},fileComplete:function(t,i,a){let n=e('ul.filelists li[data-index="'+i.index+'"]',t);if(""===a||a.err>0)n.addClass("error").find("span").html(a.msg);else{let o=n.find('input[type="hidden"]'),s=n.find("a.link");o.val(a.data.fileid),s.attr("href",a.data.filelink),n.find("span").remove(),n.appendTo(e("ul.filelists",t)),this.fileSuccess(t,i,a,n,o,s)}},fileError:function(t,i,a){dDialog.alertError(i.name+":"+a),e('ul.filelists li[data-index="'+i.index+'"]',t).addClass("error").find("span").html(a)},fileSuccess:function(t,i,a,n,o,s){let d=a.data.fileid.split("@");n.find("label").html(d[1]),s.html("("+e.fileSize(parseInt(d[3]))+")"),e('<img src="'+djConfig.CDN_URL+"dgrs/img/filetype/"+d[2]+'.gif" />').insertBefore(o)},fileRemove:function(e,t,i){i.remove()}},a=function(e,t){this.r9(e,t)};a.prototype={element:null,queue:[],total:0,uploading:!1,constructor:a,p6:null,r9:function(i,a){if(window.File&&window.FileReader&&window.FileList){this.element=e(i),this.p6=e.extend({},t,a),this.t2("DropUpload init");let n=this,o='<form action="#"><div class="dropped dropper"><div class="dzone">'+this.p6.label+'</div><input type="file"';this.p6.maxQueue>1&&(o+=" multiple"),o+='/></div></form><ul class="filelists"></ul>',this.element.append(o),this.queue=[],this.total=0,this.uploading=!1;let s=this.element.find(".dropped"),d=this.element.find("input");return s.on("click",".dzone",(function(e){n.b0(e),d.trigger("click")})).on("dragenter",(function(t){n.b0(t),e(this).addClass("dropping")})).on("dragover",(function(t){n.b0(t),e(this).addClass("dropping")})).on("dragleave",(function(t){n.b0(t),e(this).removeClass("dropping")})).on("drop",".dzone",(function(t){t.preventDefault();let i=t.originalEvent.dataTransfer.files;e(this).removeClass("dropping"),n.e2(i)})),d.change((function(e){n.b0(e);let t=this.files;t.length&&n.e2(t)})),this.p6.init(this.element),this.element}return null},t2:function(e){this.p6.debug&&djLog(e)},b0:function(e){e.stopPropagation(),e.preventDefault()},e2:function(t){let i=[];for(let e=0;e<t.length;e++){let a={index:this.total++,file:t[e],name:t[e].name,size:t[e].size,started:!1,complete:!1,error:!1,transfer:null};i.push(a),this.queue.push(a)}this.uploading||(e(window).on("beforeunload.dropper",(function(){return $DSTR.upload.pedding})),this.uploading=!0),this.p6.start(this.element,i),this.i7()},i7:function(){let t=0,a=[];for(let e in this.queue)!this.queue.hasOwnProperty(e)||this.queue[e].complete||this.queue[e].error||a.push(this.queue[e]);this.queue=a;for(let e in this.queue)if(this.queue.hasOwnProperty(e)){if(!this.queue[e].started){let t=new FormData;t.append(this.p6.postKey,this.queue[e].file);for(let e in this.p6.postData)this.p6.postData.hasOwnProperty(e)&&t.append(e,this.p6.postData[e]);this.i8(this.queue[e],t)}if(t++,t>=this.maxQueue)return;i++}0===t&&(e(window).off("beforeunload.dropper"),this.uploading=!1,this.p6.complete(this.element))},i8:function(t,i){if(t.size>this.p6.maxSize)t.error=!0,this.p6.fileError(this.element,t,$DSTR.upload.toolarge),this.i7();else{let a=this;t.started=!0,t.transfer=e.ajax({url:this.p6.action,data:i,dataType:"json",type:"POST",contentType:!1,processData:!1,cache:!1,xhr:function(){let i=e.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",(function(e){let i=0,n=e.loaded||e.position,o=e.total;e.lengthComputable&&(i=Math.ceil(n/o*100)),a.p6.fileProgress(a.element,t,i)}),!1),i},beforeSend:function(e){a.p6.fileStart(a.element,t)},success:function(e,i,n){t.complete=!0,a.p6.fileComplete(a.element,t,e,i,n),a.i7()},error:function(e,i,n){t.error=!0,a.p6.fileError(a.element,t,n,i,e),a.i7()}})}}},e.fn.dropUpload=function(t){return this.each((function(){let i=e(this),n=i.data("i6");n||(n=new a(this,"object"==typeof t&&t),i.data("i6",n))})).data("i6")}}(djCore);var dUploadFile={s5:function(e){let t=[];for(let i in e)t.push(i+"="+encodeURIComponent(e[i]));return djConfig.BASE_URL+"/modules/goku/utility/upload_file?"+t.join("&")},p6:{folder:"eoffice/test",overwrite:!1,cross_origin:!1,onChange:function(e){return!1},onSubmit:function(e){return!1},onSuccess:function(e){return!1}},q9:function(e){let t=Math.floor(999999*Math.random()),i=[e.folder,e.subfolder,e.filename],a=""===e.subfolder||"0"===e.subfolder?e.filename:e.subfolder+"/"+e.filename;return dj.extend(e,{value:a,filesize:dj.fileSize(e.fsize),url:djConfig.MEDIA_URL+i.join("/")+"?_r="+t})},init:function(e,t){let i=dj.sec(e),a=Math.floor(999999*Math.random()),n="duploadfile"+a;dj(e).each((function(e){let t=dj(this),a=t.attr("title"),o=void 0===a?"Upload tệp":a,s=t.attr("name"),d=void 0===s?"druf":s,r=t.attr("maxsize"),l=void 0===r?10485760:parseInt(r),c=t.attr("ext"),u=void 0===c?"jpeg,jpg,gif,png,docx,xlsx,zip":c,h=c.split(","),p=[];for(let e in h)p.push("."+h[e]);let f=t.attr("subfolder"),m=void 0===f?"":f,g=t.attr("argument"),v=void 0===g?"":g,w=t.attr("imgmaxw"),b=void 0===w?0:parseInt(w);t.parent().addClass("tdc"),t.replaceWith(djTemplate.render('<input type="text" name="{name}" class="imedia form-control input-sm" value="{value}" disabled="disabled"/><form class="fmedia fd{eid}" enctype="multipart/form-data" method="post" target="up_frame{name}{idx}" title="{tooltip}"><label for="uploadfile{name}{idx}" class="btn btn-info">{title}</label><input id="uploadfile{name}{idx}" name="{efilename}" class="dgupload" rel="{value}" type="file" maxsize="{maxsize}" accept="{accept}" ext="{exts}" field="{name}" subfolder="{subfolder}" argument="{argument}" idx="{idx}" imgmaxw="{imgmaxw}" /><iframe name="up_frame{name}{idx}" frameborder="0"></iframe></form>',{efilename:n,value:t.val(),name:d,title:o,tooltip:djTemplate.render("Cho phép Upload tệp {exts} tối đa {maxsize}.",{maxsize:dj.fileSize(l),exts:u}),subfolder:m,maxsize:l,accept:p.join(","),exts:u,argument:v,imgmaxw:b,eid:i,idx:i+e}))}));let o=this,s="duploadfile"+i+a,d=dj.extend({},this.p6,t);dj(".fd"+i+">input.dgupload").change((function(e){let t=dj(this),i=t.attr("rel"),a="imedia"+t.attr("idx"),r=parseInt(t.attr("maxsize")),l=t.attr("ext"),c=t.attr("field"),u=t.attr("subfolder"),h=t.attr("argument"),p=t.attr("imgmaxw");t.parent().parent().find("input.imedia").attr("id",a),d.onChange(this);let f=e.target.value,m=e.currentTarget.files;if(""!==f&&m.length>0){let t=m[0].size,g=f.toLowerCase().replace(/^.*\./,"");dj.inArray(g,l.split(","))>-1?t<=r?(d.cross_origin&&(document.domain=djConfig.HOST),d.onSubmit(e),dj(e.target).parent().attr("action",o.s5({efilename:n,tid:a,fn:s,filename:i,argument:h,field:c,folder:d.folder,subfolder:u,imgmaxw:p,overwrite:d.overwrite?1:0,crossorigin:d.cross_origin?1:0,maxsize:r,sec:dj.sec(d.folder+"*"+a+"@"+r)})).submit()):dDialog.alertError(djTemplate.render("Tệp tin <b>{fsize}</b> vượt quá dung lượng <b>{maxsize}</b> cho phép.",{fsize:dj.fileSize(t),maxsize:dj.fileSize(r)})):dDialog.alertError("Không hỗ trợ upload tệp tin này, chỉ cho phép upload tệp <b>"+l.toUpperCase()+"</b>")}})),window[s]=function(e){if(0===e.err){let t=dj("#"+e.txtid),i=o.q9(e);return d.cross_origin||dj(".fmedia",t.parent()).hide(),t.val(i.value).addClass("hasfile"),dWin.noise(djTemplate.render("Upload Tệp tin <b>{filetitle} {filesize}</b> thành công!",i),3e3,{action:"success",preventDuplicates:!0}),d.onSuccess(i),!1}if(503===e.err){let t=dj.extend(e,{fsize:dj.fileSize(e.fsize),maxsize:dj.fileSize(e.maxsize)});dDialog.alertError(djTemplate.render("Không thể Upload tệp tin <b>{title}</b>, có lỗi dung lượng <b>{fsize}</b> vượt quá <b>{maxsize}</b>.",t))}else dDialog.alertError("Không thể Upload tệp tin, có lỗi "+e.msg)}}};let dWidget={time:function(){dj.wgTime()},repMsg:function(e){dj.isNull(e)&&(e="mrep"),dj("."+e).each((function(){let t=dj(this),i=t.html();""!==i&&t.html(dj.repMessage(i)).removeClass(e)}))},emotions:function(){dj(".emotion").emotions({handle:"#etoggle",css:"ecls"}),dj(".emotion").removeClass("emotion")},p2:function(e){return djConfig.FRAMEWORK_URL+e},k8:function(e,t){let i=[];for(let a in e)a>0&&-1===dj.inArray(a,i)&&(i.push(a),i.length>=50&&(t(i),i=[]));i.length>0&&t(i)},getUser:function(e,t){dj.getJSONP(djConfig.FRAMEWORK_URL+"modules/goku/widget/getUser?u="+e.join("|"),(function(e){t(e)}))},user:function(){let e={},t=this;dj(".avatar,.display").each((function(){let i=this.getAttribute("rel");if(i&&""!==i){let a=dj(this);if(a.hasClass("avatar")){let e=this.tagName,a=this.getAttribute("wid");if(a?(a=parseInt(a),this.removeAttribute("wid")):a=50,50===a||100===a||150===a){let n=t.p2("avatar/"+i+(50===a?"":"/"+a));"IMG"===e?this.setAttribute("src",n):this.innerHTML='<img style="width:50px;height:50px" src="'+n+'" />'}}else e[i]=1,a.addClass("dwgU"+i),a.hasClass("viewcard")&&a.click((function(){return dj.getJSONP(djConfig.FRAMEWORK_URL+"modules/goku/widget/user/info/"+i,(function(e){if(0===e.err){let t='<div class="dcard"><span class="label label-success pull-right">{jobtitle}</span> <div class="media clearfix"> <a class="pull-left"><img alt="logo" class="img-circle m-b" src="{picture}"/></a> <div class="media-body"> <img class="qrcode" src="{qrcode}" /> <h5><a href="/{name}">{display}</a></h5> <div class="text-muted font-bold m-b-xs">{mobile}</div> <p>{email}</p> </div> </div> <p>Ngày sinh: <b>{ngaysinh}</b></p> <p><b class="position" rel="{positionid}"></b> / <b class="department" rel="{departmentid}"></b></p> <p>Thường trú: <b>{address}</b></p> <p>Quê quán: <b class="location huyen" rel="{location}"></b></p></div>';e.data.ngaysinh=e.data.birthday.day+"/"+e.data.birthday.month+"/"+e.data.birthday.year,dDialog.openContent(djTemplate.render(t,e.data),"Thông tin "+e.data.display,{modal:!1,afterShow:function(){dWidget.location(),dWidget.department(),dWidget.position(),dj(".ucard tr:odd").addClass("odd")}})}}),"duserinfo"),!1}));this.removeAttribute("rel")}})),this.k8(e,(function(e){dj.getJSONP(t.p2("widget/user"),{q:e.join(".")},(function(e){if(0===e.err)for(let t in e.data){let i=e.data[t],a=i[0],n=i[1];dj(".dwgU"+t).each((function(){let e=dj(this);n&&""!==n&&e.hasClass("username")?e.html(n):(e.hasClass("lastname")&&(a=dj.lastName(a)),a&&""!==a&&e.html(a)),e.removeClass("dwgU"+t)}))}}),"widget_user")}))},get_department:function(e,t){void 0===t&&(t=0),dj.getJSONP(this.p2("widget/departments"),{q:t},(function(t){e(t)}),"widget_departments")},department:function(){let e={},t=this;dj(".department").each((function(){let t=this.getAttribute("rel");t&&""!==t&&(e[t]=1,dj(this).addClass("dwgD"+t),this.removeAttribute("rel"))})),this.k8(e,(function(e){dj.getJSONP(t.p2("widget/department"),{q:e.join(".")},(function(e){if(0===e.err)for(let t in e.data){let i=e.data[t];dj(".dwgD"+t).each((function(){let e=dj(this);i&&""!==i&&e.html(i),e.removeClass("dwgD"+t)}))}}),"widget_department")}))},get_location:function(e,t){void 0===t&&(t=1),dj.getJSONP(this.p2("widget/locations"),{q:t},(function(t){e(t)}),"widget_locations")},location:function(){let e={},t=this;dj(".location").each((function(){let t=this.getAttribute("rel");t&&""!==t&&parseInt(t)>0&&(e[t]=1,dj(this).addClass("dwgL"+t),this.removeAttribute("rel"))})),this.k8(e,(function(e){dj.getJSONP(t.p2("widget/location"),{q:e.join(".")},(function(e){if(0===e.err)for(let t in e.data){let i=e.data[t],a=i[1],n=i[0];dj(".dwgL"+t).each((function(){let e=dj(this),i="";""!==n&&e.hasClass("huyen")&&(i+=n),""!==a&&(i+=(""!==i?"-":"")+a),e.html(i),e.removeClass("dwgL"+t)}))}}),"widget_location")}))},get_position:function(e){dj.getJSONP(this.p2("widget/positions"),(function(t){e(t)}),"widget_positions")},position:function(){let e={},t=this;dj(".position").each((function(){let t=this.getAttribute("rel");t&&""!==t&&(e[t]=1,dj(this).addClass("dwgP"+t),this.removeAttribute("rel"))})),this.k8(e,(function(e){dj.getJSONP(t.p2("widget/position"),{q:e.join(".")},(function(e){if(0===e.err)for(let t in e.data){let i=e.data[t];dj(".dwgP"+t).each((function(){let e=dj(this);i&&""!==i&&e.html(i),e.removeClass("dwgP"+t)}))}}),"widget_position")}))}};